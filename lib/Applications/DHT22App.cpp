#include <DHT22App.h>

#define DHTTYPE DHT11
#define DHTPIN 2

static unsigned char temp[]={0x10,0x28,0x28,0x28,0x28,0x44,0x44,0x38};
static unsigned char tempInner[]={0x00,0x10,0x10,0x10,0x10,0x38,0x38,0x00};
static const uint16_t cloud1[]={0xAA4B, 0x0, 0xb31a1a, 0x0, 0x0, 0x0, 0x0, 0x0, 
	0x020, 0x021, 0x023, 0x025, 0x027, 0x02A, 0x02F, 0x020, 
	0x040, 0x041, 0x043, 0x045, 0x047, 0x04A, 0x04F, 0x040, 
	0x060, 0x061, 0x063, 0x065, 0x067, 0x06A, 0x0066FF, 0x060, 
	0x080, 0x081, 0x083, 0x085, 0x087, 0x08A, 0x08F, 0x080, 
	0x0A0, 0x0A1, 0x0A3, 0x0A5, 0x0A7, 0x0AA, 0x0AF, 0x0A0, 
	0x0F0, 0x0F1, 0x0F3, 0x0F5, 0x0F7, 0x0FA, 0x0FF, 0x0F0, 
	0x000, 0x001, 0x003, 0x005, 0x007, 0x00A, 0x00F, 0x000, };

DHT22App::DHT22App() : dht(DHTPIN, DHTTYPE) {
    dht.begin();
}

void DHT22App::render(DisplayManager& display) {
   display.drawApp(cloud1,String(temperature),{0,0},{255, 255, 255},false,true,30,200);
}

void DHT22App::update() {
    humidity = dht.readHumidity(false);
    temperature = dht.readTemperature(false);
}
