#include <DHT22App.h>

#define DHTTYPE DHT11
#define DHTPIN 2


static const uint16_t temp[]PROGMEM  {0x0, 0x0, 0x0, 0xc986, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0xc986, 0x3276, 0xc986, 0x0, 0x0, 0x0,
0x0, 0x0, 0xc986, 0x3276, 0xc986, 0x0, 0x0, 0x0,
0x0, 0x0, 0xc986, 0x3276, 0xc986, 0x0, 0x0, 0x0,
0x0, 0x0, 0xc986, 0x3276, 0xc986, 0x0, 0x0, 0x0,
0x0, 0xc986, 0x3276, 0x3276, 0x3276, 0xc986, 0x0,
0x0, 0x0, 0xc986, 0x3276, 0x3276, 0x3276, 0xc986,0x0,
0x0, 0x0, 0x0, 0xc986, 0xc986, 0xc986, 0x0, 0x0, 0x0 };

DHT22App::DHT22App() : dht(DHTPIN, DHTTYPE) {
    dht.begin();
}

void DHT22App::render(DisplayManager& display) {
   display.drawApp(temp,String(temperature)+ "\xA7"+ "      " +humidity + "%",{0,0},{255, 255, 255},false,true,30,200);
}

void DHT22App::update() {
    humidity = (int)dht.readHumidity(false);
    temperature = (int)dht.readTemperature(false);
}
